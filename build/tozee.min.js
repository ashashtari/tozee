/*! tozee 0.1.0 2015-03-27 */
(function(t){if("function"==typeof define&&define.amd)define(["$"],t);else{var e=window.Mobify&&window.Mobify.$||window.Zepto||window.jQuery;t(e)}})(function(t){var e=function(){}(t),o=function(t){var e={alphaSet:["#","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],skipLetters:!0,classPrefix:"m-",classNames:{outer:"tozee",list:"tozee__list",bar:"tozee__bar",item:"tozee__item",letter:"tozee__letter",sticky:"-stick"}},o=function(t,e){this.setOptions(e),this.initElements(t),this.createBar(),this.bind()};return o.defaults=e,o.prototype.setOptions=function(o){var s=this.options||t.extend({},e,o);o&&(s.classNames=t.extend({},s.classNames,o.classNames||{})),this.options=s},o.prototype.initElements=function(e){return this.$element=t(e),this.$element.length?(this.$list=this.$element.find("."+this._getClass("list")),this.$items=this.$list.children(),this.$bar,void 0):!1},o.prototype.createBar=function(){var e=this,o='<ul class="'+this._getClass("bar")+'">';t.each(this.options.alphaSet,function(t,s){(!e.options.skipLetters||e._getTarget(s).length)&&(o+='<li class="'+e._getClass("letter")+'"  data-tozee="'+s+'">'+s+"</li>")}),o+="</ul>",this.$bar=t(o),this.$bar.appendTo(this.$element)},o.prototype.bind=function(){var t=this;this.$bar.on("click touchstart touchmove",function(e){e.preventDefault();var o=t._getTouchedLetter(e);if(!o||!o.length)return!1;var s=o.closest("."+t._getClass("letter")).attr("data-tozee");return s&&t._callback(s),!1}),this._bindSroll()},o.prototype._bindSroll=function(){var e=this;t(window).on("scroll touchmove",function(){e._scrollHandler()}),this._scrollHandler()},o.prototype._scrollHandler=function(){var t=window.pageYOffset,e=this._getLimits(),o=this._getClass("sticky");this.$bar.css({height:window.innerHeight}),e.top>t?this.$bar.removeClass(o).css({top:0}):t>e.bottom&&e.bottom>e.top?this.$bar.removeClass(o).css({top:e.bottom-e.top}):this.$bar.addClass(o).css({top:0})},o.prototype._callback=function(t){var e=this._getTarget(t);if(!e.length)return!1;var o=e.offset().top,s=this._getLimits();o>s.bottom&&(o=s.bottom),this.$element.trigger("tozeeScroll",t,e),this._scrollTo(o)},o.prototype._getClass=function(t){return this.options.classPrefix+this.options.classNames[t]},o.prototype._getLimits=function(){return{top:this.$element.offset().top,bottom:this.$element.offset().top+this.$element.height()-this.$bar.height()}},o.prototype._getTarget=function(t){return this.$list.find('[data-tozee="'+t+'"]')},o.prototype._getTouchedLetter=function(e){var o,s=e.touches||e.originalEvent.touches;return s?(o=t(document.elementFromPoint(s[0].pageX-window.pageXOffset,s[0].pageY-window.pageYOffset)),o.length||(o=t(document.elementFromPoint(s[0].pageX,s[0].pageY)))):o=t(e.target),o&&o.length?(console.log(e.touches,o.html()),o):!1},o.prototype._scrollTo=function(t){window.scrollTo(0,t)},o.prototype.destroy=function(){this.$bar.remove()},o}(t,e);t.fn.tozee=function(e,s){var i=t.extend({},t.fn.tozee.defaults);return"object"==typeof e&&(t.extend(i,e,!0),s=null,e=null),s=Array.prototype.slice.apply(arguments),this.each(function(){var n=(t(this),this._tozee);n||(n=new o(this,i)),e&&(n[e].apply(n,s.slice(1)),"destroy"===e&&(n=null)),this._tozee=n}),this},t.fn.tozee.defaults={}});